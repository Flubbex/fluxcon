!function t(e,o,n){function i(s,l){if(!o[s]){if(!e[s]){var u="function"==typeof require&&require;if(!l&&u)return u(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=o[s]={exports:{}};e[s][0].call(c.exports,function(t){var o=e[s][1][t];return i(o?o:t)},c,c.exports,t,e,o,n)}return o[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,o){var n=function(){this.events={}};n.prototype.emit=function(){var t=[].slice.call(arguments),e=t.shift(),o=t.shift(),n=t.shift();if(t.unshift(o),!this.events[e])throw new Error("Emitter: No such event "+e);var i=this.events[e];i.map(function(e){var o=e.args.concat(t);e.callback.apply(n,o)})},n.prototype.on=function(){var t=[].slice.call(arguments),e=t.shift(),o=t.shift(),n={callback:o,args:t};return this.events[e]||(this.events[e]=[]),this.events[e].push(n)},n.prototype.off=function(){var t=[].slice.call(arguments),e=t.shift(),o=t.shift();this.events[e].filter(function(t){return!t.callback===o})},e.exports=n},{}],2:[function(t,e,o){function n(t){this.properties={};for(var e in t)switch(typeof t[e]){case"function":this[e]=t[e];break;default:this.properties[e]=t[e]}var o=this;n.domloaders.push(function(t){o.el=t.document.getElementById(o.properties.el),o.initialize&&"function"==typeof o.initialize&&o.initialize(t)})}var i=t("./emitter");n.prototype=new i,n.domloaders=[],n.domReady=function(t){for(var e=0;e<n.domloaders.length;e++)n.domloaders[e](t)},e.exports=n},{"./emitter":1}],3:[function(t,e,o){Config={},Config.version="0.2.4",Config.vername="Happy Pizza",Config.console={},Config.console.init="J0ZsdXhjb24gJytmbHV4Y29uZmlnLnZlcnNpb24rJyAoJytmbHV4Y29uZmlnLnZlcm5hbWUrJykgcnVubmluZy4n",e.exports=Config},{}],4:[function(require,module,exports){function FluxController(t){this.config=t||{},this.ajax=new AjaxTool,this.history=new HistoryTool,this.storage=new StorageTool,window&&(window.fluxcon=this),self=this,EditorView.on("input",self.parseInput(inputstring),self),EditorView.on("clearConsole",FluxController.clear),this.parseLog(this.parse("atob('"+FluxControllerfig.console.init+"')")).el.style.color="gold"}var AjaxTool=require("../tool/ajax"),HistoryTool=require("../tool/history"),StorageTool=require("../tool/storage"),ConsoleView=require("../view/console"),EditorView=require("../view/editor");FluxController.prototype.clear=function(t){return ConsoleView.clear(t)},FluxController.prototype.parse=function(string){try{return eval(string)}catch(t){return t}return null},FluxController.prototype.parseLog=function(t,e){var o=this.parse(t),n=this.log(o);return e||this.history.push({time:this.timestamp(),command:t}),{el:n,result:o}},FluxController.prototype.parseInput=function(t){this.log(t).style.color="blue";var e=this.parseLog(t).result;return e},FluxController.prototype.up=function(){if(0===this.history.length)return!1;this.history.key=this.history.key+1>this.history.length?1:this.history.key+1;var t=this.history[this.history.key];this.input.elm.value=t.command},FluxController.prototype.down=function(){if(0===this.history.length)return!1;this.history.key=this.history.key-1<0?0:this.history.key-1;var t=this.history[this.history.key];this.input.elm.value=t.command},FluxController.prototype.timestamp=function(){return function(t){return"0"+t.getHours().toString().slice(0,1)+":0"+t.getMinutes().toString().slice(0,1)+":0"+t.getSeconds().toString().slice(0,1)}(new Date)},FluxController.prototype.focusEditor=function(){EditorView.el.focus()},FluxController.prototype.log=function(){var t=[].slice.call(arguments),e=this.timestamp(),o=ConsoleView.log(e,t.length>1?t.join(" "):t[0]);return o.scrollIntoView(),o},module.exports=FluxController},{"../tool/ajax":6,"../tool/history":7,"../tool/storage":8,"../view/console":10,"../view/editor":11}],5:[function(t,e,o){Object.dump=t("./util/object").dump;var n=(t("./config"),t("./controller/flux"),t("./class/view")),i=function(){function t(t){function e(t){fluxconsole.log(t)}function o(){const t=location.hash.slice(1);if(t){try{fluxconsole.parseInput(atob(t))}catch(e){fluxconsole.parseInput(t)}location.hash=""}}return n.domReady(t),!fluxconsole,t.addEventListener("error",e),t.addEventListener("hashchange",o),o(),fluxconsole.focusEditor(),fluxconsole}function e(e){return e?void e.addEventListener("load",t):t()}return e}(),r=r||null,s=null!==r?i(r):i();console.log(s)},{"./class/view":2,"./config":3,"./controller/flux":4,"./util/object":9}],6:[function(t,e,o){var n=function(){};n.prototype.get=function(t){var e=new XMLHttpRequest;return e.open("GET",t),e.send(),{then:function(t,o){e.addEventListener("load",function(){t.apply(o||this,arguments)})}}},e.exports=n},{}],7:[function(t,e,o){var n=function(){this.content=[]};n.key=0,n.prototype.toString=function(t){if(console.log(this.content.length),0===this.content.length)return"No history";result="<ul>"+(t||"History");for(var e=0;e<this.content.length;e++)result+="<li style='margin-left: 5%;'><span>"+this.content[e].time+"</span><span>"+this.content[e].command+"</span></li>";return result+="</ul>",result},n.prototype.push=function(t){return this.content.push(t)},n.prototype.get=function(t){return this.content[t]},n.prototype.clear=function(){this.content=[]},n.prototype.save=function(){var t=btoa("this.history.load('"+btoa(JSON.stringify(this))+"')"),e=location.toString();return e.endsWith("#")||(e+="#"),"<a href='"+e+t+"'>"+t+"</a>"},n.prototype.exec=function(t){for(var e=0;e<this.content.length-1;e++)console.log(e,this[e]),t(this.content[e].command)},n.prototype.load=function(t){if(!t)return"No command entered.";var e=JSON.parse(atob(t));this.clear();for(var o in e)this.content[o]=e[o];return this.exec(),this.toString("Loaded history")},e.exports=n},{}],8:[function(t,e,o){var n=function(){this.session=window.sessionStorage,this.local=window.localStorage};e.exports=n},{}],9:[function(t,e,o){function n(t){var e=[];return JSON.stringify(t,function(t,o){if(null!=o&&"object"==typeof o){if(e.indexOf(o)>=0)return;e.push(o)}return o})}e.exports={dump:n}},{}],10:[function(t,e,o){var n=t("../class/view"),i=new n({el:"console",initialize:function(){},clear:function(t){return this.el.innerHTML="",t||"console cleared."},log:function(t,e){var o=document.createElement("div"),n=document.createElement("span"),i=document.createElement("span");switch(i.innerHTML=t,typeof e){case"object":if("error"===e.type){n.style.color="red";var r=e.filename.slice(e.filename.lastIndexOf("/")+1);e=e.message+" ["+r+":"+e.lineno+":"+e.colno+"]"}else if(e.stack){n.style.color="red",e=e.message;break}case"function":e=e.toString();break;case"number":n.style.color="darkorange",n.style.fontFamily="Courier New";case"string":break;case"undefined":e="'undefined'",n.style.color="brown";break;default:this.log("Warning: Unhandled type cast to string: "+typeof e),e=e.toString()}return n.innerHTML=e,o.appendChild(i),o.appendChild(n),this.el.appendChild(o),o}});e.exports=i},{"../class/view":2}],11:[function(t,e,o){var n=t("../class/view"),i=new n({el:"editor",initialize:function(){this.textbox=document.getElementById("text"),this.toolbox={tb_run:document.getElementById("tb_run"),tb_load:document.getElementById("tb_load"),tb_save:document.getElementById("tb_save"),tb_panic:document.getElementById("tb_pan"),tb_flux:document.getElementById("tb_flux")};for(var t in this.toolbox)this.toolbox[t].addEventListener("click",this[t]);document.addEventListener("keydown",function(t){if(13===t.keyCode){if(0===i.textbox.value.length)return void window.setTimeout(function(){i.textbox.value=""},0);if(t.shiftKey)return;i.emit("input",i.textbox.value),i.clearText()}})},clearText:function(){window.setTimeout(function(){i.textbox.value=""},0)},tb_run:function(){""!==i.textbox.value&&(i.emit("input",i.textbox.value),i.clearText())},tb_save:function(){i.emit("input","this.history.save()")},tb_load:function(){var t=prompt("Paste your saucecode here.");i.emit("clearConsole"),i.emit("input","this.history.load('"+t+"')")},tb_panic:function(){i.emit("input","alert('AAAAAAH!')")},tb_flux:function(){i.emit("toggleflux")}});e.exports=i},{"../class/view":2}]},{},[5]);